import{c as C,t as f,B as G,m as g,k,a as R,V as b,g as o,n as y,H as h,C as r,e as B,b as P,s as V,i as x,o as v}from"./index-C_-5PtdX.js";const s={top:10,bottom:-10,left:-12,right:12},L=new o(4,.6,1),Y=12,w=await k({name:"paddle",position:new o(0,-9,0),size:L,material:{color:new r("#ffffff")}});g(w).onUpdate(({me:e,inputs:t})=>{const{Left:n,Right:l}=t.p1.directions,{Horizontal:d}=t.p1.axes,m=(l.held?1:0)-(n.held?1:0)||d.value;e.moveX(m*Y)});w.addBehavior(P({boundaries:s}));const $=.25,M=await V({name:"ball",radius:$,material:{color:new r(r.NAMES.lightgreen)}}),i=g(M).onSetup(({me:e})=>{e.setPosition(0,-7,0),e.moveXY(0,8)}).addBehaviors([y({boundaries:s,maxSpeed:25,minSpeed:3},e=>{console.log(`Ball hit ${e.boundary} at ${e.position.x}, ${e.position.y}`)}),h({collisionWith:{name:"brick"},reflectionMode:"simple"},({other:e,globals:t})=>{v(900,.04);const n=t.bricksRemaining-1;t.bricksRemaining=n,t.score=t.score+100,e.nodeDestroy({me:e,globals:t})}),h({collisionWith:{name:"paddle"},reflectionMode:"angled"},()=>{v(900,.04)})]),S=await G({name:"failZone",position:new o(0,s.bottom-1,0),size:new o(s.right-s.left+10,2,1)});S.onEnter(({visitor:e,globals:t})=>{e.uuid===i.uuid&&(t.lives>0&&(t.lives=t.lives-1),t.lives!==0?(i.setPosition(0,-7,0),i.moveXY(0,8)):(i.setPosition(0,-2,0),i.moveXY(0,0)))});const X=4,A=10,p=new o(2,.6,1),D=6,H=.4,u=[];for(let e=0;e<X;e++)for(let t=0;t<A;t++){const n=s.left+2+t*(p.x+H),l=D-e*(p.y+.6),d=new r().setHSL(.02+e*.08,.8,.5),m=await k({name:"brick",size:p,position:new o(n,l,0),material:{color:d},collision:{static:!0}});u.push(m)}const W=B({position:new o(0,0,0),perspective:"fixed-2d",zoom:24}),T=await f({name:"scoreText",text:"Score: 0",fontSize:20,stickToViewport:!0,screenPosition:new b(.1,.05)}),z=await f({name:"livesText",text:"Lives: 3",fontSize:20,stickToViewport:!0,screenPosition:new b(.9,.05)}),a=await f({name:"statusText",text:"",fontSize:32,stickToViewport:!0,screenPosition:new b(.5,.5)}),E=R({},W),c=C({id:"breakout",debug:!0,globals:{score:0,lives:3,bricksRemaining:u.length,status:""},input:{p1:{key:{ArrowLeft:["directions.left"],ArrowRight:["directions.right"],a:["directions.left"],d:["directions.right"]}}}},E,w,i,S,T,z,a,...u);c.onGlobalChanges(["bricksRemaining","lives"],([e,t])=>{e<=0&&x("status","win"),t<=0&&x("status","lose")});c.onGlobalChange("status",e=>{e==="win"?a.updateText("You Win!"):e==="lose"?a.updateText("Game Over"):a.updateText("")});c.onGlobalChange("score",e=>{T.updateText(`Score: ${e}`)});c.onGlobalChange("lives",e=>{z.updateText(`Lives: ${e}`)});export{c as default};
