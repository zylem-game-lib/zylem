import{c as U,b as l,B as b,l as z,a as V,d as A,V as u,h as i,C as a,f as M,m,r as W,H as Y,I as f,z as v,s,J as k,K as x,t as X,L as I}from"./index-DU1gm4m_.js";const S={top:5,bottom:-5,left:-15,right:15},T=V({name:"ball",position:new i(0,0,0),radius:.1,color:new a(a.NAMES.lightgreen)}),n=m(T).onSetup(({me:e})=>{e.setPosition(0,0,0),e.moveX(5)}).addBehaviors([W({boundaries:S},()=>{X()}),Y({collisionWith:{name:RegExp("paddle")}},()=>{I()})]),B={x:.2,y:1.5,z:1},G={color:new a(a.NAMES.lightblue)},P=5,w=z({name:"paddle1",position:{x:-10,y:0,z:0},size:B,material:G});m(w).onUpdate(({me:e,inputs:o})=>{const{Up:r,Down:c}=o.p1.directions,{Vertical:p}=o.p1.axes;let d=(r.held?1:0)-(c.held?1:0)||-p.value;e.moveY(d*P)});w.addBehavior(f({boundaries:S}));const g=z({name:"paddle2",position:{x:10,y:0,z:0},size:B,material:G});m(g).onUpdate(({me:e,inputs:o})=>{const{Up:r,Down:c}=o.p2.directions,{Vertical:p}=o.p2.axes,d=(r.held?1:0)-(c.held?1:0)||-p.value;e.moveY(d*P)});g.addBehavior(f({boundaries:S}));const y=b({name:"p1Goal",position:{x:12,y:0,z:0},size:new i(2,10,1)});y.onEnter(({visitor:e})=>{const o=v("p1Score")??0;e.uuid===n.uuid&&(s("p1Score",o+1),n.setPosition(0,0,0),n.moveXY(-5,0))});const C=b({name:"p2Goal",position:{x:-12,y:0,z:0},size:new i(2,10,1)});C.onEnter(({visitor:e})=>{const o=v("p2Score")??0;e.uuid===n.uuid&&(s("p2Score",o+1),n.setPosition(0,0,0),n.moveXY(5,0))});const N=M({position:new i(0,0,0),perspective:"fixed-2d",zoom:12}),D=l({name:"p1Text",text:"0",fontSize:24,screenPosition:new u(.45,.05)}),E=l({name:"p2Text",text:"0",fontSize:24,screenPosition:new u(.55,.05)}),t=l({name:"winnerText",text:"",fontSize:36,screenPosition:new u(.5,.5)}),H=A({},N),K=U({id:"pong",debug:!0,globals:{p1Score:0,p2Score:0,winner:""},input:{p1:{key:{w:["directions.up"],s:["directions.down"]}},p2:{key:{ArrowUp:["directions.up"],ArrowDown:["directions.down"]}}}},H,T,w,g,y,C,D,E,t),h=3;k(["p1Score","p2Score"],([e,o])=>{e>=h&&s("winner","p1"),o>=h&&s("winner","p2")});x("winner",e=>{console.log("Winner:",e),e==="p1"?t.updateText("P1 Wins!"):e==="p2"?t.updateText("P2 Wins!"):t.updateText("")});x("p1Score",e=>{D.updateText(String(e))});x("p2Score",e=>{E.updateText(String(e))});export{K as default};
