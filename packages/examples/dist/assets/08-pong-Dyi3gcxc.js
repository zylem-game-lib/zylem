import{c as U,t as l,F as h,l as z,s as V,b as A,V as w,d as s,C as a,g as M,m as u,v as W,I as Y,e as v,q as f,j as i,J as k,K as m,w as X,L as I}from"./index-D8uRGh44.js";const x={top:5,bottom:-5,left:-15,right:15},T=await V({name:"ball",position:new s(0,0,0),radius:.1,color:new a(a.NAMES.lightgreen)}),t=u(T).onSetup(({me:e})=>{e.setPosition(0,0,0),e.moveX(5)}).addBehaviors([W({boundaries:x},()=>{X()}),Y({collisionWith:{name:RegExp("paddle")}},()=>{I()})]),G={x:.2,y:1.5,z:1},P={color:new a(a.NAMES.lightblue)},y=5,S=await z({name:"paddle1",position:{x:-10,y:0,z:0},size:G,material:P});u(S).onUpdate(({me:e,inputs:o})=>{const{Up:r,Down:p}=o.p1.directions,{Vertical:c}=o.p1.axes;let d=(r.held?1:0)-(p.held?1:0)||-c.value;e.moveY(d*y)});S.addBehavior(v({boundaries:x}));const g=await z({name:"paddle2",position:{x:10,y:0,z:0},size:G,material:P});u(g).onUpdate(({me:e,inputs:o})=>{const{Up:r,Down:p}=o.p2.directions,{Vertical:c}=o.p2.axes,d=(r.held?1:0)-(p.held?1:0)||-c.value;e.moveY(d*y)});g.addBehavior(v({boundaries:x}));const B=await h({name:"p1Goal",position:{x:12,y:0,z:0},size:new s(2,10,1)});B.onEnter(({visitor:e})=>{const o=f("p1Score")??0;e.uuid===t.uuid&&(i("p1Score",o+1),t.setPosition(0,0,0),t.moveXY(-5,0))});const C=await h({name:"p2Goal",position:{x:-12,y:0,z:0},size:new s(2,10,1)});C.onEnter(({visitor:e})=>{const o=f("p2Score")??0;e.uuid===t.uuid&&(i("p2Score",o+1),t.setPosition(0,0,0),t.moveXY(5,0))});const N=M({position:new s(0,0,0),perspective:"fixed-2d",zoom:12}),D=await l({name:"p1Text",text:"0",fontSize:24,screenPosition:new w(.45,.05)}),E=await l({name:"p2Text",text:"0",fontSize:24,screenPosition:new w(.55,.05)}),n=await l({name:"winnerText",text:"",fontSize:36,screenPosition:new w(.5,.5)}),j=A({},N),F=U({id:"pong",debug:!0,globals:{p1Score:0,p2Score:0,winner:""},input:{p1:{key:{w:["directions.up"],s:["directions.down"]}},p2:{key:{ArrowUp:["directions.up"],ArrowDown:["directions.down"]}}}},j,T,S,g,B,C,D,E,n),b=3;k(["p1Score","p2Score"],([e,o])=>{e>=b&&i("winner","p1"),o>=b&&i("winner","p2")});m("winner",e=>{console.log("Winner:",e),e==="p1"?n.updateText("P1 Wins!"):e==="p2"?n.updateText("P2 Wins!"):n.updateText("")});m("p1Score",e=>{D.updateText(String(e))});m("p2Score",e=>{E.updateText(String(e))});export{F as default};
