import{K as G,N as v,b as I,C as R,i as B,V as M,I as _,R as S,G as V,E as F,O as N,P as O}from"./game-QaTDixkd.js";class P extends G{constructor(t=1,n=1,e=1,s=1){super(),this.type="XZPlaneGeometry",this.parameters={width:t,height:n,widthSegments:e,heightSegments:s};const i=t/2,m=n/2,l=Math.floor(e),u=Math.floor(s),c=l+1,h=u+1,d=t/l,r=n/u,g=[],f=[],p=[],E=[];for(let o=0;o<h;o++){const a=o*r-m;for(let y=0;y<c;y++){const x=y*d-i;f.push(x,0,a),p.push(0,1,0),E.push(y/l),E.push(1-o/u)}}for(let o=0;o<u;o++)for(let a=0;a<l;a++){const y=a+c*o,x=a+c*(o+1),A=a+1+c*(o+1),D=a+1+c*o;g.push(y,x,D),g.push(x,A,D)}this.setIndex(g),this.setAttribute("position",new v(f,3)),this.setAttribute("normal",new v(p,3)),this.setAttribute("uv",new v(E,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new P(t.width,t.height,t.widthSegments,t.heightSegments)}}const b=4,z={tile:new M(10,10),repeat:new M(1,1),position:new B(0,0,0),collision:{static:!0},material:{color:new R("#ffffff"),shader:"standard"},subdivisions:b};class T extends _{collider(t){const n=t.tile??new M(1,1),e=t.subdivisions??b,s=new B(n.x,1,n.y),i=t._builders?.meshBuilder?.heightData,m=new B(s.x,1,s.z);return S.heightfield(e,e,i,m)}}class X extends N{heightData=new Float32Array;columnsRows=new Map;build(t){const n=t.tile??new M(1,1),e=t.subdivisions??b,s=new B(n.x,1,n.y),i=new P(s.x,s.z,e,e),m=new O(s.x,s.z,e,e),l=s.x/e,u=s.z/e,c=i.attributes.position.array,h=m.attributes.position.array,d=new Map;for(let r=0;r<h.length;r+=3){let g=Math.floor(Math.abs(h[r]+s.x/2)/l),f=Math.floor(Math.abs(h[r+1]-s.z/2)/u);const p=Math.random()*4;h[r+2]=p,c[r+1]=p,d.get(f)||d.set(f,new Map),d.get(f).set(g,p)}return this.columnsRows=d,i}postBuild(){const t=[];for(let n=0;n<=b;++n)for(let e=0;e<=b;++e){const s=this.columnsRows.get(e);if(!s)continue;const i=s.get(n);t.push(i)}this.heightData=new Float32Array(t)}}class Y extends F{createEntity(t){return new C(t)}}const j=Symbol("Plane");class C extends V{static type=j;constructor(t){super(),this.options={...z,...t}}}async function U(...w){return I({args:w,defaultConfig:z,EntityClass:C,BuilderClass:Y,MeshBuilderClass:X,CollisionBuilderClass:T,entityType:C.type})}export{U as p};
