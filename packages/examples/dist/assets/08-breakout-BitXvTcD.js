import{c as R,t as u,z as y,m as v,h as g,a as C,V as f,e as o,d as G,D as x,C as r,q as V,b as B,s as L,E as P,F as w,f as h,n as k}from"./index-eIRJ-qNs.js";const i={top:10,bottom:-10,left:-12,right:12},$=new o(4,.6,1),D=12,b=await g({name:"paddle",position:new o(0,-9,0),size:$,material:{color:new r("#ffffff")}});v(b).onUpdate(({me:e,inputs:t})=>{const{Left:s,Right:c}=t.p1.directions,{Horizontal:l}=t.p1.axes,d=(c.held?1:0)-(s.held?1:0)||l.value;e.moveX(d*D)});b.addBehavior(B({boundaries:i}));const M=.25,Y=await L({name:"ball",radius:M,material:{color:new r(r.NAMES.lightgreen)}}),a=v(Y).onSetup(({me:e})=>{e.setPosition(0,-7,0),e.moveXY(0,8)}).addBehaviors([G({boundaries:i,maxSpeed:25,minSpeed:3},e=>{console.log(`Ball hit ${e.boundary} at ${e.position.x}, ${e.position.y}`)}),x({collisionWith:{name:"brick"},reflectionMode:"simple"},({other:e,globals:t})=>{h(900,.04);const s=t.bricksRemaining-1;t.bricksRemaining=s,t.score=t.score+100,e.nodeDestroy({me:e,globals:t})}),x({collisionWith:{name:"paddle"},reflectionMode:"angled"},()=>{h(900,.04)})]),S=await y({name:"failZone",position:new o(0,i.bottom-1,0),size:new o(i.right-i.left+10,2,1)});S.onEnter(({visitor:e,globals:t})=>{e.uuid===a.uuid&&(t.lives>0&&(t.lives=t.lives-1),a.setPosition(0,-7,0),a.moveXY(0,8))});const A=4,E=10,m=new o(2,.6,1),W=6,X=.4,p=[];for(let e=0;e<A;e++)for(let t=0;t<E;t++){const s=i.left+2+t*(m.x+X),c=W-e*(m.y+.6),l=new r().setHSL(.02+e*.08,.8,.5),d=await g({name:"brick",size:m,position:new o(s,c,0),material:{color:l},collision:{static:!0}});p.push(d)}const H=V({position:new o(0,0,0),perspective:"fixed-2d",zoom:24}),T=await u({name:"scoreText",text:"Score: 0",fontSize:20,stickToViewport:!0,screenPosition:new f(.1,.05)}),z=await u({name:"livesText",text:"Lives: 3",fontSize:20,stickToViewport:!0,screenPosition:new f(.9,.05)}),n=await u({name:"statusText",text:"",fontSize:32,stickToViewport:!0,screenPosition:new f(.5,.5)}),Z=C({},H),F=R({id:"breakout",debug:!0,globals:{score:0,lives:3,bricksRemaining:p.length,status:""},input:{p1:{key:{ArrowLeft:["directions.left"],ArrowRight:["directions.right"],a:["directions.left"],d:["directions.right"]}}}},Z,b,a,S,T,z,n,...p);P(["bricksRemaining","lives"],([e,t])=>{e<=0&&k("status","win"),t<=0&&k("status","lose")});w("status",e=>{e==="win"?n.updateText("You Win!"):e==="lose"?n.updateText("Game Over"):n.updateText("")});w("score",e=>{T.updateText(`Score: ${e}`)});w("lives",e=>{z.updateText(`Lives: ${e}`)});export{F as default};
