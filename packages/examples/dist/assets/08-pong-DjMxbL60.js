import{c as U,t as l,z as h,h as z,s as V,a as A,V as w,e as s,C as a,q as M,m as u,d as W,D as Y,b as f,l as v,n as i,E as k,F as m,f as X,G as N}from"./index-R2iKpGhl.js";const x={top:5,bottom:-5,left:-15,right:15},T=await V({name:"ball",position:new s(0,0,0),radius:.1,color:new a(a.NAMES.lightgreen)}),t=u(T).onSetup(({me:e})=>{e.setPosition(0,0,0),e.moveX(5)}).addBehaviors([W({boundaries:x},()=>{X()}),Y({collisionWith:{name:RegExp("paddle")}},()=>{N()})]),G={x:.2,y:1.5,z:1},P={color:new a(a.NAMES.lightblue)},y=5,S=await z({name:"paddle1",position:{x:-10,y:0,z:0},size:G,material:P});u(S).onUpdate(({me:e,inputs:o})=>{const{Up:r,Down:p}=o.p1.directions,{Vertical:c}=o.p1.axes;let d=(r.held?1:0)-(p.held?1:0)||-c.value;e.moveY(d*y)});S.addBehavior(f({boundaries:x}));const g=await z({name:"paddle2",position:{x:10,y:0,z:0},size:G,material:P});u(g).onUpdate(({me:e,inputs:o})=>{const{Up:r,Down:p}=o.p2.directions,{Vertical:c}=o.p2.axes,d=(r.held?1:0)-(p.held?1:0)||-c.value;e.moveY(d*y)});g.addBehavior(f({boundaries:x}));const B=await h({name:"p1Goal",position:{x:12,y:0,z:0},size:new s(2,10,1)});B.onEnter(({visitor:e})=>{const o=v("p1Score")??0;e.uuid===t.uuid&&(i("p1Score",o+1),t.setPosition(0,0,0),t.moveXY(-5,0))});const D=await h({name:"p2Goal",position:{x:-12,y:0,z:0},size:new s(2,10,1)});D.onEnter(({visitor:e})=>{const o=v("p2Score")??0;e.uuid===t.uuid&&(i("p2Score",o+1),t.setPosition(0,0,0),t.moveXY(5,0))});const q=M({position:new s(0,0,0),perspective:"fixed-2d",zoom:12}),E=await l({name:"p1Text",text:"0",fontSize:24,screenPosition:new w(.45,.05)}),C=await l({name:"p2Text",text:"0",fontSize:24,screenPosition:new w(.55,.05)}),n=await l({name:"winnerText",text:"",fontSize:36,screenPosition:new w(.5,.5)}),F=A({},q),R=U({id:"pong",debug:!0,globals:{p1Score:0,p2Score:0,winner:""},input:{p1:{key:{w:["directions.up"],s:["directions.down"]}},p2:{key:{ArrowUp:["directions.up"],ArrowDown:["directions.down"]}}}},F,T,S,g,B,D,E,C,n),b=3;k(["p1Score","p2Score"],([e,o])=>{e>=b&&i("winner","p1"),o>=b&&i("winner","p2")});m("winner",e=>{console.log("Winner:",e),e==="p1"?n.updateText("P1 Wins!"):e==="p2"?n.updateText("P2 Wins!"):n.updateText("")});m("p1Score",e=>{E.updateText(String(e))});m("p2Score",e=>{C.updateText(String(e))});export{R as default};
