import{c as L,a as f,e as P,n as A,V as d,h as S,C as y,P as z,f as m,o as w,k as v,W as g,q as X,m as O,M as T,s as h,i as l}from"./index-BiK7zbrK.js";import{p as Y}from"./player-ship-DvdlTEda.js";import{p as R}from"./player-laser-mK40aPFe.js";const N="data:image/png;base64,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",i=w(v({name:"player",images:[{name:"player",file:Y}],position:new m(0,-5,0)})),D=i.use(g,{boundaries:{top:1,bottom:-7,left:-10,right:10}});async function j(s,t){const o=w(v({name:"bullet",images:[{name:"bullet",file:R}],position:new m(s,t,0),size:new m(.5,.5,1)})),a=o.use(g,{boundaries:{top:10,bottom:-10,left:-10,right:10}});return o.onSetup(({me:e})=>{e.setPosition(s,t,0),e.setRotationDegreesZ(180)}).onUpdate(({me:e})=>{e.moveY(14),a.getLastHits()?.top&&(l(o),c=x-1)}).onCollision(({entity:e,other:n})=>{n.name==="enemy"&&(l(n),l(e),c=0)}),o}const M=X(j),b=5,x=2;let c=0;i.onUpdate(({me:s,inputs:t})=>{let{Horizontal:o,Vertical:a}=t.p1.axes;const{A:e}=t.p1.buttons;let n=o.value*b,r=-(a.value*b);({moveX:n,moveY:r}=D.getMovement(n,r)),s.moveXY(n,r),e.pressed&&c<x&&(c++,M.spawnRelative(i,p,new d(0,1)))});const u=[];for(let s=0;s<10;s++)for(let t=0;t<4;t++){const o=O(v({name:"enemy",images:[{name:"enemy",file:N}]})),a=o.use(T,{sequence:[{name:"move-left",moveX:-1.5,moveY:0,timeInSeconds:2},{name:"move-down",moveX:0,moveY:-.5,timeInSeconds:.5},{name:"move-right",moveX:1.5,moveY:0,timeInSeconds:2},{name:"move-down",moveX:0,moveY:-.5,timeInSeconds:.5}],loop:!0});o.use(g,{boundaries:{top:10,bottom:-10,left:-20,right:20}}),o.onSetup(({me:e})=>{e.setPosition(4+(s*2-10),t+3,0),a.reset()}),o.onUpdate(({me:e})=>{const{moveX:n,moveY:r}=a.getMovement();e.moveXY(n,r)}),o.onDestroy(({globals:e})=>{h("score",e.score+10)}),u.push(o)}const Z=S({position:new m(0,0,10),target:new m(0,0,0),zoom:20,perspective:z.Fixed2D}),p=P({backgroundColor:new y(y.NAMES.black)},Z);p.add(i);p.add(...u);const B=f({name:"livesText",text:"Lives: 3",fontSize:20,stickToViewport:!0,screenPosition:new d(.1,.05)}),C=f({name:"scoreText",text:"Score: 0",fontSize:20,stickToViewport:!0,screenPosition:new d(.9,.05)}),k=L({id:"space-invaders",globals:{score:0,lives:3,enemies:u.length}},p,B,C).onGlobalChange("score",(s,t)=>{t?.getEntityByName("scoreText",A)?.updateText(`Score: ${s}`)}).onGlobalChange("lives",(s,t)=>{t?.getEntityByName("livesText",A)?.updateText(`Lives: ${s}`)});export{k as default};
