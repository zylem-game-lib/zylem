const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Debug-Ba-RVRPM.js","assets/zylem-state-BudcOCuz.js","assets/vendor-three-CRJRX-3r.js","assets/Debug-D3p60LxW.css"])))=>i.map(i=>d[i]);
import{h as R}from"./zylem-state-BudcOCuz.js";import{V as i,a as T,C as L,aJ as Z}from"./vendor-three-CRJRX-3r.js";import{g as F}from"./zylem-core-CeCI51RE.js";import{s as H}from"./zylem-stage-D0gAXhhj.js";import{p as X,a as q,b as z,z as _}from"./zylem-entities-C3wAFACT.js";import"./vendor-howler-C9fHWClA.js";import{$ as U}from"./vendor-rapier-B1_KYila.js";import{m as J,a as B}from"./zylem-behaviors-DdgKh3cb.js";import"./zylem-foundation-DJZmtUpf.js";import"./zylem-graphics-CODEC42O.js";import"./zylem-input-DLlzDZOt.js";import"./zylem-physics-DmoYthWA.js";import"./zylem-camera-Br0IT0lq.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))g(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&g(a)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function g(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}})();const G="modulepreload",K=function(t){return"/"+t},j={},W=function(n,s,g){let e=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");e=Promise.all(s.map(l=>{if(l=K(l),l in j)return;j[l]=!0;const r=l.endsWith(".css"),f=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":G,r||(c.as="script",c.crossOrigin=""),c.href=l,a&&c.setAttribute("nonce",a),document.head.appendChild(c),r)return new Promise((p,u)=>{c.addEventListener("load",p),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${l}`)))})}))}return e.then(()=>n()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};let b=!1;async function $(){if(!b)try{await W(()=>import("./Debug-Ba-RVRPM.js"),__vite__mapDeps([0,1,2,3])),b=!0,console.log("🐛 Zylem Debug module loaded via state change")}catch(t){console.error("Failed to load debug module:",t)}}R.on.onChange(async t=>{t&&!b&&await $()});R.on.get()&&!b&&$();const Y={grass:"playground/grass.jpg",dirt:"playground/dirt.png",wood:"playground/wood-box.jpg",mars:"playground/mars-surface.jpg",steel:"playground/steel.png"},Q=async(t,n=new T(100,100))=>{const s=n.x/40,g=n.y/40;return await X({tile:n,collision:{static:!0},material:{path:Y[t],repeat:new T(s,g)}})},tt={player:"playground/player/idle.fbx",mascot:"playground/mascot/idle.fbx"},et={player:["idle","walking","running","jumping-up","jumping-down"],mascot:["idle","run"]},ot={player:new i(.02,.02,.02),mascot:new i(1,1,1)},nt={player:{size:new i(.5,.5,.5),position:new i(0,0,0),static:!1},mascot:{size:new i(.5,.5,.5),position:new i(0,0,0),static:!1}},at=async t=>await q({position:{x:0,y:10,z:4},scale:ot[t],models:[tt[t]],animations:et[t].map(n=>({key:n,path:`playground/${t}/${n}.fbx`})),material:{color:new L(L.NAMES.lightgreen)},collision:nt[t]}),rt=async()=>{const t=[],n=await z({position:{x:0,y:1,z:0},size:{x:6,y:.5,z:4},collision:{static:!0},material:{path:"playground/steel.png"}}),s=[{x:8,y:3,z:0,width:6,depth:4},{x:12,y:4,z:1,width:4,depth:3},{x:16,y:5,z:2,width:5,depth:5},{x:8,y:7,z:4,width:8,depth:6},{x:0,y:9,z:6,width:10,depth:2},{x:-8,y:9,z:6,width:8,depth:2},{x:-16,y:13,z:2,width:7,depth:4},{x:-8,y:15,z:0,width:3,depth:8},{x:0,y:17,z:-2,width:6,depth:3},{x:4,y:17,z:-4,width:3,depth:5}],g=[];for(const r of s)g.push(await z({position:{x:r.x,y:r.y,z:r.z},size:{x:r.width,y:.5,z:r.depth},collision:{static:!0},material:{path:"playground/steel.png"}}));const e=12,o=21,a=8,l=[];for(let r=0;r<a;r++){const f=r/a*Math.PI*2,c=Math.cos(f)*e,p=Math.sin(f)*e,u=3+Math.sin(f*2)*2,h=2+Math.cos(f*3)*1.5;if(r%2===0&&r<a-1){const S=(r+1)/a*Math.PI*2,D=Math.cos(S)*e,N=Math.sin(S)*e,V=(c+D)/2,I=(p+N)/2;l.push(await z({position:{x:V,y:o,z:I-6},size:{x:2,y:.5,z:2},collision:{static:!0},material:{path:"playground/steel.png"}}))}l.push(await z({position:{x:c,y:o,z:p-6},size:{x:u,y:.5,z:h},collision:{static:!0},material:{path:"playground/steel.png"}}))}return t.push(n,...g,...l),t},P=await H({gravity:new i(0,-9.82,0),backgroundImage:"playground/skybox.png"}),st=await Q("dirt"),d=await at("player"),A=await rt(),it=await _({position:{x:0,y:0,z:0},size:new i(10,10,10),onEnter:({self:t,visitor:n,globals:s})=>{},onExit:({self:t,visitor:n,globals:s})=>{}}),lt=await _({position:{x:0,y:20,z:0},size:new i(10,10,10),onEnter:({self:t,visitor:n,globals:s})=>{},onExit:({self:t,visitor:n,globals:s})=>{}});A[4].update=({delta:t})=>{};A[4].destroy=()=>{};const E=F({id:"behaviors-test",debug:!0,behaviors:[]},P,it,lt,st,d,...A);E.start();let O=new i,y=new i,k=1,w,C,x=!1,m=!1,v=5;const M=12;E.setup=({camera:t})=>{d.group&&t&&!t.target&&(t.target=d)};E.update=({inputs:t,delta:n})=>{const{p1:s}=t;if(!w){const p=d.body.translation(),u=new i(0,-1,0);w=new U({x:p.x,y:p.y,z:p.z},{x:u.x,y:u.y,z:u.z}),C=new Z(u,p,k,16711680),P.stageRef.scene.scene.add(C)}const g=d.body.translation(),e=new i(0,-1,0);w.origin=g,w.direction=e,P.stageRef.world.world.castRay(w,k,!0,void 0,void 0,void 0,void 0,p=>{const u=p._parent.userData.uuid;return u===d.uuid?!1:(u!==d.uuid&&!m&&(x=!0),!0)});const o=s.axes.Horizontal.value,a=s.axes.Vertical.value,l=new i(0,0,1),r=new i(1,0,0);let f=12;s.shoulders.LTrigger.held>0&&x&&(f=24);const c=9.82;if(y.set(0,0,0),(Math.abs(o)>.2||Math.abs(a)>.2)&&(y.addScaledVector(r,o*f),y.addScaledVector(l,a*f)),s.buttons.A.held>0&&x&&!m&&(m=!0,v=M,x=!1),m&&(v-=n*M,y.y=v+M),y.y-=c,y.y<-c&&(m=!1),J(d,y),x){const p=Math.abs(y.x),u=Math.abs(y.z),h=Math.max(p,u);h>2&&h<=12?d.playAnimation({key:"walking"}):h>12?d.playAnimation({key:"running"}):d.playAnimation({key:"idle"})}else y.y>5?d.playAnimation({key:"jumping-up",pauseAtEnd:!0}):m===!1&&d.playAnimation({key:"jumping-down",pauseAtEnd:!0});(Math.abs(o)>.2||Math.abs(a)>.2)&&(O=y.clone()),B(d,O)};
