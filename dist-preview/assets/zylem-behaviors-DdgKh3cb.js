import{d,T as s,a as b,b as E}from"./zylem-physics-DmoYthWA.js";import{Q as h,V as w,E as Q}from"./vendor-three-CRJRX-3r.js";const i=d({x:s.f32,y:s.f32,z:s.f32}),r=d({x:s.f32,y:s.f32,z:s.f32,w:s.f32}),k=d({x:s.f32,y:s.f32,z:s.f32});function M(n){const e=b([i,r]),a=n._childrenMap;return E(c=>{const y=e(c);if(a===void 0)return c;for(let f=0;f<y.length;++f){const t=y[f],o=a.get(`${t}-key`);if(o===void 0||!o?.body)continue;const{x:u,y:m,z:l}=o.body.translation();if(i.x[t]=u,i.y[t]=m,i.z[t]=l,o.controlledRotation)continue;const{x:p,y:x,z,w:g}=o.body.rotation();r.x[t]=p,r.y[t]=x,r.z[t]=z,r.w[t]=g}for(let f=0;f<a.size;f++){const t=y[f],o=a.get(`${t}-key`);if(o===void 0||!o?.body||(o.group?o.group.position.set(i.x[t],i.y[t],i.z[t]):o.mesh&&o.mesh.position.set(i.x[t],i.y[t],i.z[t]),o.controlledRotation))continue;const u=new h(r.x[t],r.y[t],r.z[t],r.w[t]);o.group?o.group.setRotationFromQuaternion(u):o.mesh&&o.mesh.setRotationFromQuaternion(u)}return c})}function S(n,e){if(!n.body)return;const a=Math.atan2(-e.x,e.z);R(n,a)}function R(n,e){v(n,new w(0,-e,0))}function v(n,e){if(!n.group)return;const a=new Q(e.x,e.y,e.z);n.group.setRotationFromEuler(a)}function $(n,e){n.body&&n.body.setLinvel(e,!0)}export{S as a,M as c,$ as m,i as p,r,k as s};
